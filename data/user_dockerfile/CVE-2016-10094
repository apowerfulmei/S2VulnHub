FROM ubuntu:14.04
RUN sed -i "s@http://.*archive.ubuntu.com@http://mirrors.ustc.edu.cn/@g" /etc/apt/sources.list
RUN sed -i "s@http://.*security.ubuntu.com@http://mirrors.ustc.edu.cn/@g" /etc/apt/sources.list
ARG DEBIAN_FRONTEND=noninteractive
RUN apt update && apt install -y iputils-ping wget git vim build-essential cmake unzip
RUN apt install -y autoconf pkg-config libpng-dev pstoedit libpstoedit-dev
WORKDIR /root
RUN git clone https://github.com/vadz/libtiff
WORKDIR /root/libtiff
RUN git checkout b28076b056eba9d665881bab139d21b21137fd2d
RUN echo -n Q0ZMQUdTPSctZnNhbml0aXplPWFkZHJlc3MnIExERkxBR1M9Jy1sYXNhbicgLi9jb25maWd1cmUKbWFrZSAtag== | base64 -d > build.sh
RUN wget https://github.com/asarubbo/poc/raw/master/00112-libtiff-heapoverflow-_TIFFmemcpy
RUN echo -n Li90b29scy90aWZmMnBkZiAwMDExMi1saWJ0aWZmLWhlYXBvdmVyZmxvdy1fVElGRm1lbWNweSAgLW8gZm9v | base64 -d > poc.sh
CMD ["/bin/bash"]
